<!DOCTYPE html>
<!-- saved from url=(0056)http://rubylearning.org/classes/mod/page/view.php?id=633 -->
<html dir="ltr" lang="en" xml:lang="en" class="yui3-js-enabled"><div id="yui3-css-stamp" style="position: absolute !important; visibility: hidden !important" class=""></div><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <title>PFTWWR-2: Day 13 - JSON, MongoDB, mongo, MongoHQ</title>
    <link rel="shortcut icon" href="http://rubylearning.org/classes/theme/image.php/leatherbound/theme/1358135153/favicon">
    
<meta name="keywords" content="moodle, PFTWWR-2: Day 13 - JSON, MongoDB, mongo, MongoHQ">
<link rel="stylesheet" type="text/css" href="./PFTWWR-2  Day 13 - JSON, MongoDB, mongo, MongoHQ_files/yui_combo.php"><script type="text/javascript" src="./PFTWWR-2  Day 13 - JSON, MongoDB, mongo, MongoHQ_files/yui_combo(1).php"></script><script charset="utf-8" id="yui_3_7_3_2_1358410102833_5" src="./PFTWWR-2  Day 13 - JSON, MongoDB, mongo, MongoHQ_files/dock.js" async=""></script><script charset="utf-8" id="yui_3_7_3_2_1358410102833_6" src="./PFTWWR-2  Day 13 - JSON, MongoDB, mongo, MongoHQ_files/yui_combo(2).php" async=""></script><script id="firstthemesheet" type="text/css">/** Required in order to fix style inclusion problems in IE with YUI **/</script><link rel="stylesheet" type="text/css" href="./PFTWWR-2  Day 13 - JSON, MongoDB, mongo, MongoHQ_files/all">
<script type="text/javascript">
//<![CDATA[
var M = {}; M.yui = {};
var moodleConfigFn = function(me) {var p = me.path, b = me.name.replace(/^moodle-/,'').split('-', 3), n = b.pop();if (/(skin|core)/.test(n)) {n = b.pop();me.type = 'css';};me.path = b.join('-')+'/'+n+'/'+n+'.'+me.type;};
var galleryConfigFn = function(me) {var p = me.path,v=M.yui.galleryversion,f;if(/-(skin|core)/.test(me.name)) {me.type = 'css';p = p.replace(/-(skin|core)/, '').replace(/\.js/, '.css').split('/'), f = p.pop().replace(/(\-(min|debug))/, '');if (/-skin/.test(me.name)) {p.splice(p.length,0,v,'assets','skins','sam', f);} else {p.splice(p.length,0,v,'assets', f);};} else {p = p.split('/'), f = p.pop();p.splice(p.length,0,v, f);};me.path = p.join('/');};
var yui2in3ConfigFn = function(me) {if(/-skin|reset|fonts|grids|base/.test(me.name)){me.type='css';me.path=me.path.replace(/\.js/,'.css');me.path=me.path.replace(/\/yui2-skin/,'/assets/skins/sam/yui2-skin');}};
YUI_config = {"base":"http:\/\/rubylearning.org\/classes\/lib\/yuilib\/3.7.3\/build\/","comboBase":"http:\/\/rubylearning.org\/classes\/theme\/yui_combo.php?","combine":true,"filter":"","insertBefore":"firstthemesheet","modules":{"core_filepicker":{"name":"core_filepicker","fullpath":"http:\/\/rubylearning.org\/classes\/lib\/javascript.php\/1358135153\/repository\/filepicker.js","requires":["base","node","node-event-simulate","json","async-queue","io-base","io-upload-iframe","io-form","yui2-treeview","panel","cookie","datatable","datatable-sort","resize-plugin","dd-plugin","moodle-core_filepicker"]},"core_dock":{"name":"core_dock","fullpath":"http:\/\/rubylearning.org\/classes\/lib\/javascript.php\/1358135153\/blocks\/dock.js","requires":["base","node","event-custom","event-mouseenter","event-resize"]}},"groups":{"moodle":{"name":"moodle","base":"http:\/\/rubylearning.org\/classes\/theme\/yui_combo.php?moodle\/1358135153\/","comboBase":"http:\/\/rubylearning.org\/classes\/theme\/yui_combo.php?","combine":true,"filter":"","ext":false,"root":"moodle\/1358135153\/","patterns":{"moodle-":{"group":"moodle","configFn":moodleConfigFn}}},"local":{"name":"gallery","base":"http:\/\/rubylearning.org\/classes\/lib\/yui\/gallery\/","comboBase":"http:\/\/rubylearning.org\/classes\/theme\/yui_combo.php?","combine":true,"filter":"","ext":false,"root":"gallery\/","patterns":{"gallery-":{"group":"gallery","configFn":galleryConfigFn}}},"yui2":{"base":"http:\/\/rubylearning.org\/classes\/lib\/yuilib\/2in3\/2.9.0\/build\/","comboBase":"http:\/\/rubylearning.org\/classes\/theme\/yui_combo.php?","combine":true,"ext":false,"root":"2in3\/2.9.0\/build\/","patterns":{"yui2-":{"group":"yui2","configFn":yui2in3ConfigFn}}}}};
M.yui.loader = {modules: {}};
M.cfg = {"wwwroot":"http:\/\/rubylearning.org\/classes","sesskey":"jCmhDlJCQH","loadingicon":"http:\/\/rubylearning.org\/classes\/theme\/image.php\/leatherbound\/core\/1358135153\/i\/loading_small","themerev":"1358135153","slasharguments":1,"theme":"leatherbound","jsrev":"1358135153","svgicons":true};
//]]>
</script>
<script type="text/javascript" src="./PFTWWR-2  Day 13 - JSON, MongoDB, mongo, MongoHQ_files/javascript-static.js"></script>
<script type="text/javascript" src="./PFTWWR-2  Day 13 - JSON, MongoDB, mongo, MongoHQ_files/head"></script>

<link rel="icon" type="image/ico" href="http://rubylearning.com/images/favicon.ico"></head>

<body id="page-mod-page-view" class="format-weeks  path-mod path-mod-page safari dir-ltr lang-en yui-skin-sam yui3-skin-sam rubylearning-org--classes pagelayout-incourse course-10 context-1075 cmid-633 category-4 side-pre-only jsenabled">
<div class="skiplinks"><a class="skip" href="http://rubylearning.org/classes/mod/page/view.php?id=633#maincontent">Skip to main content</a></div>
<script type="text/javascript">
//<![CDATA[
document.body.className += ' jsenabled';
//]]>
</script>


<div id="page">
    <div id="page-header">
        <div id="page-header-wrapper" class="wrapper clearfix">
                <h1 class="headermain inside">Programming for the Web with Ruby</h1>
                <div class="headermenu"><div class="logininfo">You are logged in as <a href="http://rubylearning.org/classes/user/profile.php?id=22">Douglas Allen</a> (<a href="http://rubylearning.org/classes/login/logout.php?sesskey=jCmhDlJCQH">Logout</a>)</div>                </div>
        </div>
    </div>



                    <div class="navbar">
                <div class="wrapper clearfix">
                    <div class="breadcrumb"><span class="accesshide">Page path</span><ul role="navigation"><li><a title="Home" href="http://rubylearning.org/classes/">Home</a></li><li> <span class="accesshide "><span class="arrow_text">/</span>&nbsp;</span><span class="arrow sep">►</span> <a title="Programming for the Web with Ruby" href="http://rubylearning.org/classes/course/view.php?id=10">PFTWWR-2</a></li><li> <span class="accesshide "><span class="arrow_text">/</span>&nbsp;</span><span class="arrow sep">►</span> <span tabindex="0"> 11 January -  17 January</span></li><li> <span class="accesshide "><span class="arrow_text">/</span>&nbsp;</span><span class="arrow sep">►</span> <a title="Page" href="./PFTWWR-2  Day 13 - JSON, MongoDB, mongo, MongoHQ_files/PFTWWR-2  Day 13 - JSON, MongoDB, mongo, MongoHQ.htm">Day 13 - JSON, MongoDB, mongo, MongoHQ</a></li></ul></div>
                    <div class="navbutton"> </div>
                </div>
            </div>
        
<!-- END OF HEADER -->
<div id="page-content-wrapper" class="wrapper clearfix">
    <div id="page-content">
        <div id="region-main-box">
            <div id="region-post-box">

                <div id="region-main-wrap">
                    <div id="region-main">
                        <div class="region-content">
                                                        <div role="main"><span id="maincontent"></span><h2 id="pageheading" class="main">Day 13 - JSON, MongoDB, mongo, MongoHQ</h2><div class="box generalbox center clearfix"><div class="no-overflow"><div>
<h1>Day 13</h1>
<h2><span style="color: #990033;">What's JSON?</span></h2>

<p>JSON stands for <b>J</b>ava<b>S</b>cript <b>O</b>bject <b>N</b>otation.</p>

<p>JSON is syntax for storing and exchanging text information, much like XML. JSON is smaller than XML, and faster and easier to parse. JSON is language independent. Here's an example:</p>

<pre>{
"employees": [
{ "firstName":"John" , "lastName":"Doe" },
{ "firstName":"Anna" , "lastName":"Smith" },
{ "firstName":"Peter" , "lastName":"Jones" }
]
}
</pre>

<p>The employee object is an array of 3 employee records (objects).</p>

<p>JSON data is written as name/value pairs. A name/value pair consists of a field name (in double quotes), followed by a colon, followed by a value:</p>

<pre>"firstName" : "Satish"
</pre>

<p>JSON values can be:</p>
<ul>
<li>A number (integer or floating point)</li>
<li>A string (in double quotes)</li>
<li>A Boolean (true or false)</li>
<li>An array (in square brackets)</li>
<li>An object (in curly brackets)</li>
<li>null</li>
</ul>

<p>JSON objects are written inside curly brackets, Objects can contain multiple name/values pairs:</p>

<pre>{ "firstName":"Satish" , "lastName":"Talim" }
</pre>

<p>We will come across JSON, when we study MongoDB next.</p>

<h2><span style="color: #990033;">Using MongoDB with Ruby Mongo driver</span></h2>
<h3><span style="color: #0000CC;">What's NoSQL?</span></h3>

<p>In the words of <a href="http://openmymind.net/about.html">Karl Seguin</a>:</p>
<blockquote><p>NoSQL is a broad term that means different things to different people. Personally, I use it very broadly to mean a system that plays a part in the storage of data. Put another way, NoSQL (again, for me), is the belief that your persistence layer isn't necessarily the responsibility of a single system. Where relational database vendors have historically tried to position their software as a one-size-fits-all solution, NoSQL leans towards smaller units of responsibility where the best tool for a given job can be leveraged. So, your NoSQL stack might still leverage a relational databases, say MySQL, but it'll also contain Redis as a persistence lookup for specific parts of the system as well as Hadoop for your intensive data processing. Put simply, NoSQL is about being open and aware of alternative, existing and additional patterns and tools for managing your data.<br><br>You might be wondering where MongoDB fits into all of this. As a <em><span style="background-color: #FFFFCC;">document-oriented database</span></em>, Mongo is a more generalized NoSQL solution. It should be viewed as an alternative to relational databases. Like relational databases, it too can benefit from being paired with some of the more specialized NoSQL solutions.</p></blockquote>

<h3><span style="color: #0000CC;">What's MongoDB?</span></h3>

<p>MongoDB is a high-performance, open source, schema-free, document-oriented database written in C++.</p>

<h3><span style="color: #0000CC;">Setup MongoDB</span></h3>
<p><b>Note</b>: It's suggested that you refer to the <a href="http://docs.mongodb.org/manual/installation/">Installing MongoDB</a> 
guide, which explains in great details the installation for a variety of operating systems.</p>
<p>Here's how I did it:</p>
<ul>
<li>Download the binaries from the first row (the recommended stable version) for your operating system of choice from the <a href="http://www.mongodb.org/downloads">official download page</a>.</li>
<li>Extract the archive (wherever you want) and navigate to the <code>bin</code> subfolder. Don't execute anything just yet, but know that <code>mongod</code> is the server process and <code>mongo</code> is the client shell - these are the two executables we'll be spending most of our time with.</li>
<li>Create a new text file in the <code>bin</code> subfolder named <code>mongodb.config</code></li>
<li>Add a single line to your <code>mongodb.config</code>: <code>dbpath=PATH_TO_WHERE_YOU_WANT_TO_STORE_YOUR_DATABASE_FILES</code>. For example, on Windows you might do <code>dbpath=c:\mongodb\data</code> and on Linux you might do <code>dbpath=/etc/mongodb/data</code>.</li>
<li><em>Make sure the dbpath you specified exists</em></li>
<li>Do add the <code>bin</code> folder to your <code>path</code>. MacOSX and Linux users can follow almost identical directions. The only thing you should have to change are the paths.</li>
<li>Open a new command window and launch <code>mongod</code> with the <code>--config /path/to/your/mongodb.config</code> parameter. On my machine it is: <code>mongod --config c:/mongodb-win32-i386-2.0.1/bin/mongodb.config</code></li>
</ul>

<p>You now have MonogDB up and running. Open another command window and launch <code>mongo</code> (without the d) which will connect a shell to your running server. Try entering <code>db.version()</code> to make sure everything's working as it should. Hopefully you'll see the version number you installed.</p>

<p>While the shell is useful to learn as well as being a useful administrative tool, your code will use a MongoDB driver. MongoDB has a <a href="http://www.mongodb.org/display/DOCS/Drivers">number of official drivers</a> for various languages. These drivers can be thought of as the various database drivers you are probably already familiar with. On top of these drivers, the development community has built more language/framework-specific libraries. For example, <a href="https://github.com/jnunemaker/mongomapper">MongoMapper</a> is a Ruby library which is ActiveRecord-friendly. Whether you choose to program directly against the core MongoDB drivers or some higher-level library is up to you.</p>

<h3><span style="color: #0000CC;">MongoDB Core Concepts</span></h3>
<ol>
<li>MongoDB has the same concept of a '<em>database</em>' with which you are likely already familiar (or a schema for you Oracle folks). Within a MongoDB instance you can have zero or more databases, each acting as high-level containers for everything else.</li>
<li>A database can have zero or more '<em>collections</em>'. A collection shares enough in common with a traditional 'table' that you can safely think of the two as the same thing.</li>
<li>Collections are made up of zero or more '<em>documents</em>'. Again, a document can safely be thought of as a 'row'.</li>
<li>A document is made up of one or more '<em>fields</em>', which you can probably guess are a lot like 'columns'.</li>
<li>'<em>Indexes</em>' in MongoDB function much like their RDBMS counterparts.</li>
<li>'<em>Cursors</em>' are different than the other five concepts but they are important enough. The important thing to understand about cursors is that when you ask MongoDB for data, it returns a cursor, which we can do things to, such as counting or skipping ahead, without actually pulling down data.</li>
</ol>

<p>To recap, MongoDB is made up of databases which contain collections. A collection is made up of documents. Each document is made up of fields. Collections can be indexed, which improves lookup and sorting performance. Finally, when we get data from MongoDB we do so through a cursor whose actual execution is delayed until necessary.</p>

</div>

<div style="width:image 560 px; font-size:80%; text-align:center;"><img src="./PFTWWR-2  Day 13 - JSON, MongoDB, mongo, MongoHQ_files/MongoDB.jpg" alt="MongoDB" width="560" style="padding-bottom:0.5em;"><br>MongoDB</div>

<div>

<p><b>Note</b>: <em>The core difference between relational databases and document-oriented databases comes from the fact that relational databases define columns at the table level whereas a document-oriented database defines its fields at the document level</em>.</p>

<h3><span style="color: #0000CC;">The Basics</span></h3>
<p>The <code>mongo</code> shell runs JavaScript. There are some global commands you can execute, like <code>help</code> or <code>exit</code>. Commands that you execute against the current database are executed against the <code>db</code> object, such as <code>db.help()</code> or <code>db.stats()</code>. Commands that you execute against a specific collection are executed against the <code>db.COLLECTION_NAME</code> object, such as <code>db.students.help()</code> or <code>db.students.count()</code>.</p>

<p>Because <code>mongo</code> is a JavaScript shell, if you execute a method and omit the parentheses (), you'll see the method body rather than executing the method. For example, if you enter <code>db.help</code> (without the parentheses), you'll see the internal implementation of the help method.</p>

<h4><span style="color: #663366;">Switch databases</span></h4>
<p>Use the global <code>use</code> method to switch databases. In the <code>mongo</code> window type:</p>
<pre>use rubylearning
switched to db rubylearning
</pre>

<h4><span style="color: #663366;">Insert a document</span></h4>
<p>It doesn't matter that the database doesn't really exist yet. The first collection that we create will also create the actual <code>rubylearning</code> database. Now that you are inside a database, you can start issuing database commands, like <code>db.getCollectionNames()</code>. If you do so, you should get an empty array ([ ]). Since collections are schema-less, we don't explicitly need to create them. We can simply insert a document into a new collection. To do so, use the insert command, supplying it with the document to insert:</p>
<pre>db.students.insert({name: 'Satish', gender: 'm', weight: 74})
</pre>

<p>The above line is executing <code>insert</code> against the <code>students</code> collection, passing it a single argument. Internally MongoDB uses a binary serialized JSON format. Externally, this means that we use JSON a lot, as is the case with our parameters. If we execute <code>db.getCollectionNames()</code> now, we'll actually see two collections: <code>students</code> and <code>system.indexes</code>. <code>system.indexes</code> is created once per database and contains the information on our databases index.</p>

<h4><span style="color: #663366;">Use find()</span></h4>
<p>You can now use the <code>find</code> command against <code>students</code> to return a list of documents:</p>
<pre>db.students.find()
{ "_id" : ObjectId("4ec0e38aadb3865da7f2fd63"), "name" : "Satish", 
"gender" : "m", "weight" : 74 }
</pre>

<p>Notice that, in addition to the data you specified, there's an <code>_id</code> field. Every document must have a unique <code>_id</code> field. You can either generate one yourself or let MongoDB generate an ObjectId for you. Most of the time you'll probably want to let MongoDB generate it for you. By default, the <code>_id</code> field is indexed - which explains why the system.indexes collection was created. You can look at system.indexes:</p>
<pre>db.system.indexes.find()
{ "v" : 1, "key" : { "_id" : 1 }, "ns" : "rubylearning.students", "name" : "_id_" }
</pre>

<p>What you're seeing is the name of the index, the database and collection it was created against and the fields included in the index.</p>

<p>Now insert a totally different document into <code>students</code>, such as:</p>
<pre>db.students.insert({name: 'Michael', gender: 'm', home: 'Vienna', mentor: true})
</pre>

<p>And, again use find to list the documents.</p>
<pre>db.students.find()
{ "_id" : ObjectId("4ec0e38aadb3865da7f2fd63"), "name" : "Satish", 
"gender" : "m", "weight" : 74 }
{ "_id" : ObjectId("4ec0e6a0adb3865da7f2fd64"), "name" : "Michael", 
"gender" : "m", "home" : "Vienna", "mentor" : true }
</pre>

<h4><span style="color: #663366;">Removing all documents</span></h4>
<p>To remove all documents that we have put in the <code>students</code> collection, type:</p>
<pre>db.students.remove()
</pre>

<h4><span style="color: #663366;">Query Selectors</span></h4>
<p>A MongoDB query selector is like the where clause of an SQL statement. As such, you use it when finding, counting, updating and removing documents from collections. A selector is a JSON object, the simplest of which is <code>{}</code> which matches all documents (<code>null</code> works too). If we wanted to find all female students, we could use <code>{gender:'f'}</code>.</p>
<p>Let's insert some documents into our <code>students</code> collection:<br><img src="./PFTWWR-2  Day 13 - JSON, MongoDB, mongo, MongoHQ_files/mongo_code.jpg" alt="mongo"></p>

<p><code>{field: value}</code> is used to find any documents where field is equal to value. <code>{field1: value1, field2: value2}</code> is how we do an <em>and</em> statement. The special <code>$lt</code>, <code>$lte</code>, <code>$gt</code>, <code>$gte</code> and <code>$ne</code> are used for less than, less than or equal, greater than, greater than or equal and not equal operations. For example, to get all male students that weigh more than 70 kgs, we could do:</p>
<pre>db.students.find({gender: 'm', weight: {$gt: 70}})
{ "_id" : ObjectId("4ec1d27d0af675a4df885ffd"), "name" : "Satish", "dob" : ISODa
te("1955-03-10T18:25:00Z"), "loves" : [ "ruby", "java" ], "weight" : 76, "gender
" : "m", "country" : "india" }
</pre>

<p>The <code>$exists</code> operator is used for matching the presence or absence of a field, for example:</p>
<pre>db.students.find({name: {$exists: false}})
</pre>

<p>If we want to OR rather than AND we use the <code>$or</code> operator and assign it to an array of values we want or'd:</p>
<pre>db.students.find({gender: 'f', $or: [{loves: 'java'}, {loves: 'english'}, {weight: {$lt: 80}}]})
{ "_id" : ObjectId("4ec1d62f0af675a4df886001"), "name" : "Sangeeta", 
"dob" : ISODate("1965-04-10T20:45:00Z"), "loves" : [ "english", "french" ], 
"weight" : 60, "gender" : "f", "country" : "india" }
</pre>
<p>The above will return all female students which either love java or english or weigh less than 80 kgs.</p>

<p>So far we have seen three of the four CRUD (create, read, update and delete) operations. Let's now look at <code>update</code>.</p>

<h4><span style="color: #663366;">Updating a document</span></h4>
<p>We already have some documents in our database <code>rubylearning</code>. Satoshi, one of the participants informs us that he has lost weight and is now at 62 kgs. Let's update the document. Type:</p>
<pre>db.students.update({name: 'Satoshi'}, {weight: 62})
</pre>

<p>Now, if we look at the updated document:</p>
<pre>db.students.find({name: 'Satoshi'})
</pre>
<p>You should discover <b>updates first surprise</b>. No document is found because the second parameter we supply is used to replace the original. In other words, the <code>update</code> found a document by name and replaced the entire document with the new document (the 2nd parameter). <em>This is different than how SQL's update command works</em>.</p>

<p>When you want to change the value of one, or a few fields, it's best to use MongoDB's <code>$set</code> modifier:</p>
<pre>db.students.update({weight: 62}, {$set: {name: 'Satoshi', dob: new Date(1970,1,11,3,55), loves: ['ruby','c'], 
gender: 'm', country: 'japan'}})
</pre>

<p>This'll reset the lost fields. It won't overwrite the new weight since we didn't specify it. Now if we execute:</p>
<pre>db.students.find({name: 'Satoshi'})
</pre>
<p>We get the expected result. Therefore, the correct way to have updated the weight in the first place is:</p>
<pre>db.students.update({name: 'Satoshi'}, {$set: {weight: 62}})
</pre>

<p>Now let's learn how to use the MongoDB Ruby Driver by using whatever we have learnt so far.</p>

<h3><span style="color: #0000CC;">MongoDB Ruby Driver - mongo</span></h3>
<h4><span style="color: #663366;">Installation</span></h4>
<p>Since the driver is just a gem, installation is simple:</p>
<pre>$ gem install mongo
</pre>

<p>There is one more piece to install, <code>bson_ext</code>. Essentially, this is a collection of C extensions used to increase the speed of serialization. While this is optional, I recommend that you install it:</p>
<pre>$ gem install bson_ext
</pre>

<h4><span style="color: #663366;">Using the mongo gem</span></h4>
<p>Your Ruby program needs the following:</p>
<pre>require 'mongo'
</pre>

<h4><span style="color: #663366;">Making a Connection</span></h4>
<p>A <code>MongoClient</code> instance represents a connection to MongoDB.</p>
<pre>require 'mongo'
conn = MongoClient.new
</pre>

<p>A database doesn't have to exist - if it doesn't, MongoDB will create it for you. The following example shows three ways to connect to the database "rubylearning" on the local machine:</p>
<pre>require 'mongo'
db = MongoClient.new.db("rubylearning")
db = MongoClient.new("localhost").db("rubylearning")
db = MongoClient.new("localhost", 27017).db("rubylearning")
</pre>
<p>Here, localhost and 27017 represents the MongoDB server address and port when connecting. At this point, the <code>db</code> object will be a connection to a MongoDB server for the specified database. Each DB instance uses a separate socket connection to the server.</p>

<p>Let's call our program <code>mongodb1.rb</code>. The code so far:</p>
<pre>require 'mongo'
conn = MongoClient.new
db = conn.db("rubylearning")
</pre>

<h4><span style="color: #663366;">Getting a List Of Collections</span></h4>
<p>Each database has zero or more collections. You can retrieve a list of them from the <code>db</code> (and print out any that are there):</p>
<pre>db.collection_names.each { |name| puts name }
</pre>

<p>It displays:</p>
<pre>students
system.indexes
</pre>

<h4><span style="color: #663366;">Getting a Collection</span></h4>
<p>You can get a collection to use using the <code>collection</code> method:</p>
<pre>coll = db.collection("students")
</pre>

<p>Once you have this collection object, you can now do things like insert data, query for data, etc.</p>

<h4><span style="color: #663366;">Inserting a Document</span></h4>
<p>MongoDB stores its data as key/value pairs, which maps nicely to Ruby's <code>Hash</code>. Create a hash with our data; insert it into the <code>coll</code> collection; and in return, we receive the <code>ObjectId</code> for the data inserted, from MongoDB.</p>
<pre>doc = {:name =&gt; 'Manisha', :dob =&gt; Time.now, :loves =&gt; ['english','marathi'], :weight =&gt; 62, 
:gender =&gt; 'f', :country =&gt; 'india'}
coll_id = coll.insert(doc)
</pre>

<h4><span style="color: #663366;">Updating a Document</span></h4>
<p>Using the ObjectId we got back from our <code>insert</code> query, we find that same document again. After changing the data as we see fit, we update the previous document using the <code>update</code> method:</p>
<pre>coll.update( { :_id =&gt; coll_id }, '$set' =&gt; { :weight =&gt; 60 } )
</pre>

<p>Our sample program <code>mongodb1.rb</code>:</p>
<pre>require 'mongo'

conn = MongoClient.new
db = conn.db("rubylearning")
db.collection_names.each { |name| puts name }

coll = db.collection("students")
doc = {:name =&gt; 'Manish', :dob =&gt; Time.now, :loves =&gt; ['english','marathi'], :weight =&gt; 62, 
:gender =&gt; 'm', :country =&gt; 'india'}
coll_id = coll.insert(doc)
coll.update( { :_id =&gt; coll_id }, '$set' =&gt; { :weight =&gt; 60 } )
</pre>

<h3><span style="color: #0000CC;">MongoHQ the hosted database</span></h3>
<p>MongoHQ is the hosted database solution for getting your applications up and running on MongoDB.</p>

<h4><span style="color: #663366;">Sign Up</span></h4>
<p>Sign up for a free account at <a href="https://mongohq.com/signup">https://mongohq.com/signup</a>. When you fill up the online form, remember what you enter for default username and password - we will need this information later on.</p>

<h4><span style="color: #663366;">Create a database</span></h4>
<p>Next, create a free database. I have created a database named <code>rubylearning</code> in my account. My database <code>rubylearning</code> is at server <code>staff.mongohq.com</code> and port <code>10066</code>.</p>

</div>

<div style="width:image 560 px; font-size:80%; text-align:center;"><img src="./PFTWWR-2  Day 13 - JSON, MongoDB, mongo, MongoHQ_files/mongohq.jpg" alt="MongoDB" width="560" style="padding-bottom:0.5em;"><br>MongoHQ</div>

<div>

<h4><span style="color: #663366;">Accessing the database</span></h4>
<p>Let us modify our program <code>mongodb1.rb</code> to access our database on MongoHQ:</p>
<pre>require 'mongo'

db = MongoClient.new('staff.mongohq.com', 10066).db("rubylearning")
auth = db.authenticate('username', 'password')

coll = db.collection("students")
doc = {:name =&gt; 'Manish', :dob =&gt; Time.now, :loves =&gt; ['english','marathi'], 
:weight =&gt; 62, :gender =&gt; 'm', :country =&gt; 'india'}
coll_id = coll.insert(doc)
</pre>

<p>In the above code, MongoDB is run in a secure mode where access to databases is controlled through name and password authentication. When run in this mode, any client application must provide a name and password before doing any operations. In the Ruby driver, you simply do the following with the connected mongo object:</p>
<pre>auth = db.authenticate('username', 'password')
</pre>

<p>If the name and password are valid for the database, auth will be true. Otherwise, it will be false.</p>

<p>After executing the above code, the collection <code>students</code> has a document.</p>
<p>This has been a very quick tour of MongoDB but I am sure that it would have given you the necessary tools to start using MongoDB with Ruby.</p>

<h3><span style="color: #0000CC;">Exercise: Create a database on MongoHQ</span></h3>
<p>Sign up for a free account at <a href="https://mongohq.com/signup">https://mongohq.com/signup</a>. Next, create a free database of say your contacts.</p>
<h2><span style="color: #990033;">References</span></h2>
<ul>
<li><a href="http://www.w3schools.com/json/default.asp">http://www.w3schools.com/json/default.asp</a></li>
<li><a href="https://github.com/karlseguin/the-little-mongodb-book">https://github.com/karlseguin/the-little-mongodb-book</a></li>
<li><a href="http://rubylearning.com/blog/2010/12/21/being-awesome-with-the-mongodb-ruby-driver/">http://rubylearning.com/blog/2010/12/21/being-awesome-with-the-mongodb-ruby-driver/</a></li>
<li><a href="http://api.mongodb.org/ruby/current/file.TUTORIAL.html">http://api.mongodb.org/ruby/current/file.TUTORIAL.html</a></li>
</ul>
</div></div></div><div class="modified">Last modified: Sunday, 13 January 2013, 12:03 AM</div></div>                                                    </div>
                    </div>
                </div>

                                <div id="region-pre" class="block-region">
                    <div class="region-content">
                        <a href="http://rubylearning.org/classes/mod/page/view.php?id=633#sb-1" class="skip-block">Skip Navigation</a><div id="inst4" class="block_navigation  block" role="navigation" aria-labelledby="instance-4-header"><div class="header"><div class="title"><div class="block_action"></div><h2 id="instance-4-header">Navigation</h2></div></div><div class="content"><ul class="block_tree list"><li class="type_unknown depth_1 contains_branch" aria-expanded="true"><p class="tree_item branch canexpand navigation_node"><a title="Home" href="http://rubylearning.org/classes/">Home</a></p><ul><li class="type_setting depth_2 item_with_icon"><p class="tree_item leaf hasicon"><a title="My home" href="http://rubylearning.org/classes/my/"><img alt="" class="smallicon navicon" title="" src="./PFTWWR-2  Day 13 - JSON, MongoDB, mongo, MongoHQ_files/navigationitem">My home</a></p></li>
<li class="type_course depth_2 collapsed contains_branch" aria-expanded="false"><p class="tree_item branch"><span title="A Ruby Learning Hub" tabindex="0">Site pages</span></p><ul><li class="type_custom depth_3 item_with_icon"><p class="tree_item leaf hasicon"><a title="Notes" href="http://rubylearning.org/classes/notes/index.php?filtertype=course&filterselect=0"><img alt="" class="smallicon navicon" title="" src="./PFTWWR-2  Day 13 - JSON, MongoDB, mongo, MongoHQ_files/navigationitem">Notes</a></p></li>
<li class="type_custom depth_3 item_with_icon"><p class="tree_item leaf hasicon"><a title="Tags" href="http://rubylearning.org/classes/tag/search.php"><img alt="" class="smallicon navicon" title="" src="./PFTWWR-2  Day 13 - JSON, MongoDB, mongo, MongoHQ_files/navigationitem">Tags</a></p></li>
<li class="type_custom depth_3 item_with_icon"><p class="tree_item leaf hasicon"><a title="Calendar" href="http://rubylearning.org/classes/calendar/view.php?view=month"><img alt="" class="smallicon navicon" title="" src="./PFTWWR-2  Day 13 - JSON, MongoDB, mongo, MongoHQ_files/navigationitem">Calendar</a></p></li>
<li class="type_unknown depth_3 collapsed contains_branch" aria-expanded="false"><p class="tree_item branch"><span tabindex="0">Reports</span></p><ul><li class="type_setting depth_4 item_with_icon"><p class="tree_item leaf hasicon"><a title="Logs" href="http://rubylearning.org/classes/report/log/index.php?id=1"><img alt="" class="smallicon navicon" title="" src="./PFTWWR-2  Day 13 - JSON, MongoDB, mongo, MongoHQ_files/report">Logs</a></p></li>
<li class="type_setting depth_4 item_with_icon"><p class="tree_item leaf hasicon"><a href="http://rubylearning.org/classes/report/loglive/index.php?id=1&inpopup=1" id="action_link50f7b1777eaee1"><img alt="" class="smallicon navicon" title="" src="./PFTWWR-2  Day 13 - JSON, MongoDB, mongo, MongoHQ_files/report">Live logs</a></p></li>
<li class="type_setting depth_4 item_with_icon"><p class="tree_item leaf hasicon"><a title="Activity report" href="http://rubylearning.org/classes/report/outline/index.php?id=1"><img alt="" class="smallicon navicon" title="" src="./PFTWWR-2  Day 13 - JSON, MongoDB, mongo, MongoHQ_files/report">Activity report</a></p></li>
<li class="type_setting depth_4 item_with_icon"><p class="tree_item leaf hasicon"><a title="Course participation" href="http://rubylearning.org/classes/report/participation/index.php?id=1"><img alt="" class="smallicon navicon" title="" src="./PFTWWR-2  Day 13 - JSON, MongoDB, mongo, MongoHQ_files/report">Course participation</a></p></li>
<li class="type_setting depth_4 item_with_icon"><p class="tree_item leaf hasicon"><a title="Statistics" href="http://rubylearning.org/classes/report/stats/index.php?course=1"><img alt="" class="smallicon navicon" title="" src="./PFTWWR-2  Day 13 - JSON, MongoDB, mongo, MongoHQ_files/report">Statistics</a></p></li></ul></li>
<li class="type_activity depth_3 item_with_icon"><p class="tree_item leaf hasicon"><a title="Forum" href="http://rubylearning.org/classes/mod/forum/view.php?id=10"><img alt="Forum" class="smallicon navicon" title="Forum" src="./PFTWWR-2  Day 13 - JSON, MongoDB, mongo, MongoHQ_files/icon">Site news</a></p></li>
<li class="type_activity depth_3 item_with_icon"><p class="tree_item leaf hasicon"><a title="Page" href="http://rubylearning.org/classes/mod/page/view.php?id=8"><img alt="Page" class="smallicon navicon" title="Page" src="./PFTWWR-2  Day 13 - JSON, MongoDB, mongo, MongoHQ_files/icon(1)">Privacy Policy</a></p></li></ul></li>
<li class="type_user depth_2 collapsed contains_branch" aria-expanded="false"><p class="tree_item branch"><span tabindex="0">My profile</span></p><ul><li class="type_custom depth_3 item_with_icon"><p class="tree_item leaf hasicon"><a title="View profile" href="http://rubylearning.org/classes/user/profile.php?id=22"><img alt="" class="smallicon navicon" title="" src="./PFTWWR-2  Day 13 - JSON, MongoDB, mongo, MongoHQ_files/navigationitem">View profile</a></p></li>
<li class="type_custom depth_3 collapsed contains_branch" aria-expanded="false"><p class="tree_item branch"><span tabindex="0">Forum posts</span></p><ul><li class="type_custom depth_4 item_with_icon"><p class="tree_item leaf hasicon"><a title="Posts" href="http://rubylearning.org/classes/mod/forum/user.php?id=22"><img alt="" class="smallicon navicon" title="" src="./PFTWWR-2  Day 13 - JSON, MongoDB, mongo, MongoHQ_files/navigationitem">Posts</a></p></li>
<li class="type_custom depth_4 item_with_icon"><p class="tree_item leaf hasicon"><a title="Discussions" href="http://rubylearning.org/classes/mod/forum/user.php?id=22&mode=discussions"><img alt="" class="smallicon navicon" title="" src="./PFTWWR-2  Day 13 - JSON, MongoDB, mongo, MongoHQ_files/navigationitem">Discussions</a></p></li></ul></li>
<li class="type_setting depth_3 item_with_icon"><p class="tree_item leaf hasicon"><a title="Messages" href="http://rubylearning.org/classes/message/index.php"><img alt="" class="smallicon navicon" title="" src="./PFTWWR-2  Day 13 - JSON, MongoDB, mongo, MongoHQ_files/navigationitem">Messages</a></p></li>
<li class="type_setting depth_3 item_with_icon"><p class="tree_item leaf hasicon"><a title="My private files" href="http://rubylearning.org/classes/user/files.php"><img alt="" class="smallicon navicon" title="" src="./PFTWWR-2  Day 13 - JSON, MongoDB, mongo, MongoHQ_files/navigationitem">My private files</a></p></li></ul></li>
<li class="type_system depth_2 contains_branch" aria-expanded="true"><p class="tree_item branch"><span tabindex="0">Current course</span></p><ul><li class="type_course depth_3 contains_branch" aria-expanded="true"><p class="tree_item branch canexpand"><a title="Programming for the Web with Ruby" href="http://rubylearning.org/classes/course/view.php?id=10">PFTWWR-2</a></p><ul><li class="type_unknown depth_4 collapsed contains_branch" aria-expanded="false"><p class="tree_item branch"><a title="Participants" href="http://rubylearning.org/classes/user/index.php?id=10">Participants</a></p><ul><li class="type_custom depth_5 item_with_icon"><p class="tree_item leaf hasicon"><a title="Notes" href="http://rubylearning.org/classes/notes/index.php?filtertype=course&filterselect=10"><img alt="" class="smallicon navicon" title="" src="./PFTWWR-2  Day 13 - JSON, MongoDB, mongo, MongoHQ_files/navigationitem">Notes</a></p></li>
<li class="type_user depth_5 collapsed contains_branch" aria-expanded="false"><p class="tree_item branch"><a title="Douglas Allen" href="http://rubylearning.org/classes/user/view.php?id=22&course=10">Douglas Allen</a></p><ul><li class="type_custom depth_6 item_with_icon"><p class="tree_item leaf hasicon"><a title="View profile" href="http://rubylearning.org/classes/user/view.php?id=22&course=10"><img alt="" class="smallicon navicon" title="" src="./PFTWWR-2  Day 13 - JSON, MongoDB, mongo, MongoHQ_files/navigationitem">View profile</a></p></li>
<li class="type_custom depth_6 collapsed contains_branch" aria-expanded="false"><p class="tree_item branch"><span tabindex="0">Forum posts</span></p><ul><li class="type_custom depth_7 item_with_icon"><p class="tree_item leaf hasicon"><a title="Posts" href="http://rubylearning.org/classes/mod/forum/user.php?id=22&course=10"><img alt="" class="smallicon navicon" title="" src="./PFTWWR-2  Day 13 - JSON, MongoDB, mongo, MongoHQ_files/navigationitem">Posts</a></p></li>
<li class="type_custom depth_7 item_with_icon"><p class="tree_item leaf hasicon"><a title="Discussions" href="http://rubylearning.org/classes/mod/forum/user.php?id=22&course=10&mode=discussions"><img alt="" class="smallicon navicon" title="" src="./PFTWWR-2  Day 13 - JSON, MongoDB, mongo, MongoHQ_files/navigationitem">Discussions</a></p></li></ul></li>
<li class="type_setting depth_6 item_with_icon"><p class="tree_item leaf hasicon"><a title="Messages" href="http://rubylearning.org/classes/message/index.php"><img alt="" class="smallicon navicon" title="" src="./PFTWWR-2  Day 13 - JSON, MongoDB, mongo, MongoHQ_files/navigationitem">Messages</a></p></li>
<li class="type_setting depth_6 item_with_icon"><p class="tree_item leaf hasicon"><a title="My private files" href="http://rubylearning.org/classes/user/files.php"><img alt="" class="smallicon navicon" title="" src="./PFTWWR-2  Day 13 - JSON, MongoDB, mongo, MongoHQ_files/navigationitem">My private files</a></p></li>
<li class="type_custom depth_6 item_with_icon"><p class="tree_item leaf hasicon"><a title="Notes" href="http://rubylearning.org/classes/notes/index.php?user=22&course=10"><img alt="" class="smallicon navicon" title="" src="./PFTWWR-2  Day 13 - JSON, MongoDB, mongo, MongoHQ_files/navigationitem">Notes</a></p></li>
<li class="type_custom depth_6 collapsed contains_branch" aria-expanded="false"><p class="tree_item branch"><span tabindex="0">Activity reports</span></p><ul><li class="type_custom depth_7 item_with_icon"><p class="tree_item leaf hasicon"><a title="Today&#39;s logs" href="http://rubylearning.org/classes/report/log/user.php?id=22&course=10&mode=today"><img alt="" class="smallicon navicon" title="" src="./PFTWWR-2  Day 13 - JSON, MongoDB, mongo, MongoHQ_files/navigationitem">Today's logs</a></p></li>
<li class="type_custom depth_7 item_with_icon"><p class="tree_item leaf hasicon"><a title="All logs" href="http://rubylearning.org/classes/report/log/user.php?id=22&course=10&mode=all"><img alt="" class="smallicon navicon" title="" src="./PFTWWR-2  Day 13 - JSON, MongoDB, mongo, MongoHQ_files/navigationitem">All logs</a></p></li>
<li class="type_custom depth_7 item_with_icon"><p class="tree_item leaf hasicon"><a title="Outline report" href="http://rubylearning.org/classes/report/outline/user.php?id=22&course=10&mode=outline"><img alt="" class="smallicon navicon" title="" src="./PFTWWR-2  Day 13 - JSON, MongoDB, mongo, MongoHQ_files/navigationitem">Outline report</a></p></li>
<li class="type_custom depth_7 item_with_icon"><p class="tree_item leaf hasicon"><a title="Complete report" href="http://rubylearning.org/classes/report/outline/user.php?id=22&course=10&mode=complete"><img alt="" class="smallicon navicon" title="" src="./PFTWWR-2  Day 13 - JSON, MongoDB, mongo, MongoHQ_files/navigationitem">Complete report</a></p></li>
<li class="type_custom depth_7 item_with_icon"><p class="tree_item leaf hasicon"><a title="Statistics" href="http://rubylearning.org/classes/report/stats/user.php?id=22&course=10"><img alt="" class="smallicon navicon" title="" src="./PFTWWR-2  Day 13 - JSON, MongoDB, mongo, MongoHQ_files/navigationitem">Statistics</a></p></li>
<li class="type_custom depth_7 item_with_icon"><p class="tree_item leaf hasicon"><a title="Grade" href="http://rubylearning.org/classes/course/user.php?mode=grade&id=10&user=22"><img alt="" class="smallicon navicon" title="" src="./PFTWWR-2  Day 13 - JSON, MongoDB, mongo, MongoHQ_files/navigationitem">Grade</a></p></li></ul></li></ul></li></ul></li>
<li class="type_unknown depth_4 collapsed contains_branch" aria-expanded="false"><p class="tree_item branch"><span tabindex="0">Reports</span></p><ul><li class="type_setting depth_5 item_with_icon"><p class="tree_item leaf hasicon"><a title="Logs" href="http://rubylearning.org/classes/report/log/index.php?id=10"><img alt="" class="smallicon navicon" title="" src="./PFTWWR-2  Day 13 - JSON, MongoDB, mongo, MongoHQ_files/report">Logs</a></p></li>
<li class="type_setting depth_5 item_with_icon"><p class="tree_item leaf hasicon"><a href="http://rubylearning.org/classes/report/loglive/index.php?id=10&inpopup=1" id="action_link50f7b1777eaee2"><img alt="" class="smallicon navicon" title="" src="./PFTWWR-2  Day 13 - JSON, MongoDB, mongo, MongoHQ_files/report">Live logs</a></p></li>
<li class="type_setting depth_5 item_with_icon"><p class="tree_item leaf hasicon"><a title="Activity report" href="http://rubylearning.org/classes/report/outline/index.php?id=10"><img alt="" class="smallicon navicon" title="" src="./PFTWWR-2  Day 13 - JSON, MongoDB, mongo, MongoHQ_files/report">Activity report</a></p></li>
<li class="type_setting depth_5 item_with_icon"><p class="tree_item leaf hasicon"><a title="Course participation" href="http://rubylearning.org/classes/report/participation/index.php?id=10"><img alt="" class="smallicon navicon" title="" src="./PFTWWR-2  Day 13 - JSON, MongoDB, mongo, MongoHQ_files/report">Course participation</a></p></li>
<li class="type_setting depth_5 item_with_icon"><p class="tree_item leaf hasicon"><a title="Statistics" href="http://rubylearning.org/classes/report/stats/index.php?course=10"><img alt="" class="smallicon navicon" title="" src="./PFTWWR-2  Day 13 - JSON, MongoDB, mongo, MongoHQ_files/report">Statistics</a></p></li></ul></li>
<li class="type_structure depth_4 collapsed contains_branch" aria-expanded="false"><p class="tree_item branch" id="expandable_branch_1"><span tabindex="0">General</span></p></li>
<li class="type_structure depth_4 collapsed contains_branch" aria-expanded="false"><p class="tree_item branch" id="expandable_branch_2"><span tabindex="0"> 4 January -  10 January</span></p></li>
<li class="type_structure depth_4 contains_branch" aria-expanded="true"><p class="tree_item branch"><span tabindex="0"> 11 January -  17 January</span></p><ul><li class="type_activity depth_5 item_with_icon"><p class="tree_item leaf hasicon"><a title="Page" href="http://rubylearning.org/classes/mod/page/view.php?id=626"><img alt="Page" class="smallicon navicon" title="Page" src="./PFTWWR-2  Day 13 - JSON, MongoDB, mongo, MongoHQ_files/icon(1)">...ck::Request, Rack::Response, Deployment to Heroku)</a></p></li>
<li class="type_activity depth_5 item_with_icon"><p class="tree_item leaf hasicon"><a title="Page" href="http://rubylearning.org/classes/mod/page/view.php?id=627"><img alt="Page" class="smallicon navicon" title="Page" src="./PFTWWR-2  Day 13 - JSON, MongoDB, mongo, MongoHQ_files/icon(1)">Day 9 - Deploying a static webpage to Heroku</a></p></li>
<li class="type_activity depth_5 item_with_icon"><p class="tree_item leaf hasicon"><a title="Page" href="http://rubylearning.org/classes/mod/page/view.php?id=628"><img alt="Page" class="smallicon navicon" title="Page" src="./PFTWWR-2  Day 13 - JSON, MongoDB, mongo, MongoHQ_files/icon(1)">Day 10 - Basics of Sinatra</a></p></li>
<li class="type_activity depth_5 item_with_icon"><p class="tree_item leaf hasicon"><a title="Page" href="http://rubylearning.org/classes/mod/page/view.php?id=629"><img alt="Page" class="smallicon navicon" title="Page" src="./PFTWWR-2  Day 13 - JSON, MongoDB, mongo, MongoHQ_files/icon(1)">Bonus: Stock Exchange Quote Service App</a></p></li>
<li class="type_activity depth_5 item_with_icon"><p class="tree_item leaf hasicon"><a title="Page" href="http://rubylearning.org/classes/mod/page/view.php?id=630"><img alt="Page" class="smallicon navicon" title="Page" src="./PFTWWR-2  Day 13 - JSON, MongoDB, mongo, MongoHQ_files/icon(1)">Day 11 - Rack 4 (Middleware, Rack::Builder)</a></p></li>
<li class="type_activity depth_5 item_with_icon"><p class="tree_item leaf hasicon"><a title="Page" href="http://rubylearning.org/classes/mod/page/view.php?id=631"><img alt="Page" class="smallicon navicon" title="Page" src="./PFTWWR-2  Day 13 - JSON, MongoDB, mongo, MongoHQ_files/icon(1)">Day 12 - Sinatra and Rack</a></p></li>
<li class="type_activity depth_5 item_with_icon current_branch"><p class="tree_item leaf hasicon active_tree_node"><a title="Page" href="./PFTWWR-2  Day 13 - JSON, MongoDB, mongo, MongoHQ_files/PFTWWR-2  Day 13 - JSON, MongoDB, mongo, MongoHQ.htm"><img alt="Page" class="smallicon navicon" title="Page" src="./PFTWWR-2  Day 13 - JSON, MongoDB, mongo, MongoHQ_files/icon(1)">Day 13 - JSON, MongoDB, mongo, MongoHQ</a></p></li>
<li class="type_activity depth_5 item_with_icon"><p class="tree_item leaf hasicon"><a title="Page" href="http://rubylearning.org/classes/mod/page/view.php?id=634"><img alt="Page" class="smallicon navicon" title="Page" src="./PFTWWR-2  Day 13 - JSON, MongoDB, mongo, MongoHQ_files/icon(1)">Day 14 - Sinatra, SQLite, YAML, ActiveRecord, CRUD</a></p></li></ul></li></ul></li></ul></li>
<li class="type_system depth_2 collapsed contains_branch" aria-expanded="false"><p class="tree_item branch" id="expandable_branch_3"><a title="My courses" href="http://rubylearning.org/classes/my">My courses</a></p></li></ul></li></ul></div></div><span id="sb-1" class="skip-block-to"></span><a href="http://rubylearning.org/classes/mod/page/view.php?id=633#sb-2" class="skip-block">Skip Settings</a><div id="inst5" class="block_settings  block" role="navigation" aria-labelledby="instance-5-header"><div class="header"><div class="title"><div class="block_action"></div><h2 id="instance-5-header">Settings</h2></div></div><div class="content"><div id="settingsnav" class="box block_tree_box"><ul class="block_tree list"><li class="type_unknown contains_branch" aria-expanded="true"><p class="tree_item branch root_node"><span tabindex="0">Page module administration</span></p><ul><li class="type_setting collapsed item_with_icon"><p class="tree_item leaf"><a title="Edit settings" href="http://rubylearning.org/classes/course/modedit.php?update=633&return=1&sesskey=jCmhDlJCQH"><img alt="" class="smallicon navicon" title="" src="./PFTWWR-2  Day 13 - JSON, MongoDB, mongo, MongoHQ_files/navigationitem">Edit settings</a></p></li>
<li class="type_setting collapsed item_with_icon"><p class="tree_item leaf"><a title="Locally assigned roles" href="http://rubylearning.org/classes/admin/roles/assign.php?contextid=1075"><img alt="" class="smallicon navicon" title="" src="./PFTWWR-2  Day 13 - JSON, MongoDB, mongo, MongoHQ_files/navigationitem">Locally assigned roles</a></p></li>
<li class="type_setting collapsed item_with_icon"><p class="tree_item leaf"><a title="Permissions" href="http://rubylearning.org/classes/admin/roles/permissions.php?contextid=1075"><img alt="" class="smallicon navicon" title="" src="./PFTWWR-2  Day 13 - JSON, MongoDB, mongo, MongoHQ_files/navigationitem">Permissions</a></p></li>
<li class="type_setting collapsed item_with_icon"><p class="tree_item leaf"><a title="Check permissions" href="http://rubylearning.org/classes/admin/roles/check.php?contextid=1075"><img alt="" class="smallicon navicon" title="" src="./PFTWWR-2  Day 13 - JSON, MongoDB, mongo, MongoHQ_files/navigationitem">Check permissions</a></p></li>
<li class="type_setting collapsed item_with_icon"><p class="tree_item leaf"><a title="Filters" href="http://rubylearning.org/classes/filter/manage.php?contextid=1075"><img alt="" class="smallicon navicon" title="" src="./PFTWWR-2  Day 13 - JSON, MongoDB, mongo, MongoHQ_files/navigationitem">Filters</a></p></li>
<li class="type_setting collapsed item_with_icon"><p class="tree_item leaf"><a title="Logs" href="http://rubylearning.org/classes/report/log/index.php?chooselog=1&id=10&modid=633"><img alt="" class="smallicon navicon" title="" src="./PFTWWR-2  Day 13 - JSON, MongoDB, mongo, MongoHQ_files/navigationitem">Logs</a></p></li>
<li class="type_setting collapsed item_with_icon"><p class="tree_item leaf"><a title="Backup" href="http://rubylearning.org/classes/backup/backup.php?id=10&cm=633"><img alt="" class="smallicon navicon" title="" src="./PFTWWR-2  Day 13 - JSON, MongoDB, mongo, MongoHQ_files/navigationitem">Backup</a></p></li>
<li class="type_setting collapsed item_with_icon"><p class="tree_item leaf"><a title="Restore" href="http://rubylearning.org/classes/backup/restorefile.php?contextid=1075"><img alt="" class="smallicon navicon" title="" src="./PFTWWR-2  Day 13 - JSON, MongoDB, mongo, MongoHQ_files/navigationitem">Restore</a></p></li></ul></li>
<li class="type_course collapsed contains_branch" aria-expanded="false"><hr><p class="tree_item branch root_node"><span tabindex="0">Course administration</span></p><ul><li class="type_setting collapsed item_with_icon"><p class="tree_item leaf"><a title="Turn editing on" href="http://rubylearning.org/classes/course/view.php?id=10&return=%2Fmod%2Fpage%2Fview.php%3Fid%3D633&sesskey=jCmhDlJCQH&edit=on"><img alt="" class="smallicon navicon" title="" src="./PFTWWR-2  Day 13 - JSON, MongoDB, mongo, MongoHQ_files/edit">Turn editing on</a></p></li>
<li class="type_setting collapsed item_with_icon"><p class="tree_item leaf"><a title="Edit settings" href="http://rubylearning.org/classes/course/edit.php?id=10"><img alt="" class="smallicon navicon" title="" src="./PFTWWR-2  Day 13 - JSON, MongoDB, mongo, MongoHQ_files/settings">Edit settings</a></p></li>
<li class="type_unknown collapsed contains_branch" aria-expanded="false"><p class="tree_item branch"><span tabindex="0">Users</span></p><ul><li class="type_setting collapsed item_with_icon"><p class="tree_item leaf"><a title="Enrolled users" href="http://rubylearning.org/classes/enrol/users.php?id=10"><img alt="" class="smallicon navicon" title="" src="./PFTWWR-2  Day 13 - JSON, MongoDB, mongo, MongoHQ_files/enrolusers">Enrolled users</a></p></li>
<li class="type_setting collapsed item_with_icon"><p class="tree_item leaf"><a title="Enrolment methods" href="http://rubylearning.org/classes/enrol/instances.php?id=10"><img alt="" class="smallicon navicon" title="" src="./PFTWWR-2  Day 13 - JSON, MongoDB, mongo, MongoHQ_files/navigationitem">Enrolment methods</a></p></li>
<li class="type_setting collapsed item_with_icon"><p class="tree_item leaf"><a title="Groups" href="http://rubylearning.org/classes/group/index.php?id=10"><img alt="" class="smallicon navicon" title="" src="./PFTWWR-2  Day 13 - JSON, MongoDB, mongo, MongoHQ_files/group">Groups</a></p></li>
<li class="type_setting collapsed contains_branch" aria-expanded="false"><p class="tree_item branch"><a title="Permissions" href="http://rubylearning.org/classes/admin/roles/permissions.php?contextid=1031">Permissions</a></p><ul><li class="type_setting collapsed item_with_icon"><p class="tree_item leaf"><a title="Check permissions" href="http://rubylearning.org/classes/admin/roles/check.php?contextid=1031"><img alt="" class="smallicon navicon" title="" src="./PFTWWR-2  Day 13 - JSON, MongoDB, mongo, MongoHQ_files/checkpermissions">Check permissions</a></p></li></ul></li>
<li class="type_setting collapsed item_with_icon"><p class="tree_item leaf"><a title="Other users" href="http://rubylearning.org/classes/enrol/otherusers.php?id=10"><img alt="" class="smallicon navicon" title="" src="./PFTWWR-2  Day 13 - JSON, MongoDB, mongo, MongoHQ_files/assignroles">Other users</a></p></li></ul></li>
<li class="type_setting collapsed item_with_icon"><p class="tree_item leaf"><a title="Filters" href="http://rubylearning.org/classes/filter/manage.php?contextid=1031"><img alt="" class="smallicon navicon" title="" src="./PFTWWR-2  Day 13 - JSON, MongoDB, mongo, MongoHQ_files/filter">Filters</a></p></li>
<li class="type_setting collapsed item_with_icon"><p class="tree_item leaf"><a title="Grades" href="http://rubylearning.org/classes/grade/report/index.php?id=10"><img alt="" class="smallicon navicon" title="" src="./PFTWWR-2  Day 13 - JSON, MongoDB, mongo, MongoHQ_files/grades">Grades</a></p></li>
<li class="type_setting collapsed item_with_icon"><p class="tree_item leaf"><a title="Backup" href="http://rubylearning.org/classes/backup/backup.php?id=10"><img alt="" class="smallicon navicon" title="" src="./PFTWWR-2  Day 13 - JSON, MongoDB, mongo, MongoHQ_files/backup">Backup</a></p></li>
<li class="type_setting collapsed item_with_icon"><p class="tree_item leaf"><a title="Restore" href="http://rubylearning.org/classes/backup/restorefile.php?contextid=1031"><img alt="" class="smallicon navicon" title="" src="./PFTWWR-2  Day 13 - JSON, MongoDB, mongo, MongoHQ_files/restore">Restore</a></p></li>
<li class="type_setting collapsed item_with_icon"><p class="tree_item leaf"><a title="Import" href="http://rubylearning.org/classes/backup/import.php?id=10"><img alt="" class="smallicon navicon" title="" src="./PFTWWR-2  Day 13 - JSON, MongoDB, mongo, MongoHQ_files/import">Import</a></p></li>
<li class="type_setting collapsed item_with_icon"><p class="tree_item leaf"><a title="Reset" href="http://rubylearning.org/classes/course/reset.php?id=10"><img alt="" class="smallicon navicon" title="" src="./PFTWWR-2  Day 13 - JSON, MongoDB, mongo, MongoHQ_files/return">Reset</a></p></li>
<li class="type_unknown collapsed contains_branch" aria-expanded="false"><p class="tree_item branch"><a title="Question bank" href="http://rubylearning.org/classes/question/edit.php?courseid=10">Question bank</a></p><ul><li class="type_setting collapsed item_with_icon"><p class="tree_item leaf"><a title="Questions" href="http://rubylearning.org/classes/question/edit.php?courseid=10"><img alt="" class="smallicon navicon" title="" src="./PFTWWR-2  Day 13 - JSON, MongoDB, mongo, MongoHQ_files/navigationitem">Questions</a></p></li>
<li class="type_setting collapsed item_with_icon"><p class="tree_item leaf"><a title="Categories" href="http://rubylearning.org/classes/question/category.php?courseid=10"><img alt="" class="smallicon navicon" title="" src="./PFTWWR-2  Day 13 - JSON, MongoDB, mongo, MongoHQ_files/navigationitem">Categories</a></p></li>
<li class="type_setting collapsed item_with_icon"><p class="tree_item leaf"><a title="Import" href="http://rubylearning.org/classes/question/import.php?courseid=10"><img alt="" class="smallicon navicon" title="" src="./PFTWWR-2  Day 13 - JSON, MongoDB, mongo, MongoHQ_files/navigationitem">Import</a></p></li>
<li class="type_setting collapsed item_with_icon"><p class="tree_item leaf"><a title="Export" href="http://rubylearning.org/classes/question/export.php?courseid=10"><img alt="" class="smallicon navicon" title="" src="./PFTWWR-2  Day 13 - JSON, MongoDB, mongo, MongoHQ_files/navigationitem">Export</a></p></li></ul></li></ul></li>
<li class="type_unknown collapsed contains_branch" aria-expanded="false"><hr><p class="tree_item branch root_node"><span tabindex="0">Switch role to...</span></p><ul><li class="type_setting collapsed item_with_icon"><p class="tree_item leaf"><a title="Non-editing teacher" href="http://rubylearning.org/classes/course/switchrole.php?id=10&sesskey=jCmhDlJCQH&switchrole=4&returnurl=http%3A%2F%2Frubylearning.org%2Fclasses%2Fmod%2Fpage%2Fview.php%3Fid%3D633%26sesskey%3DjCmhDlJCQH"><img alt="" class="smallicon navicon" title="" src="./PFTWWR-2  Day 13 - JSON, MongoDB, mongo, MongoHQ_files/switchrole">Non-editing teacher</a></p></li>
<li class="type_setting collapsed item_with_icon"><p class="tree_item leaf"><a title="Student" href="http://rubylearning.org/classes/course/switchrole.php?id=10&sesskey=jCmhDlJCQH&switchrole=5&returnurl=http%3A%2F%2Frubylearning.org%2Fclasses%2Fmod%2Fpage%2Fview.php%3Fid%3D633%26sesskey%3DjCmhDlJCQH"><img alt="" class="smallicon navicon" title="" src="./PFTWWR-2  Day 13 - JSON, MongoDB, mongo, MongoHQ_files/switchrole">Student</a></p></li>
<li class="type_setting collapsed item_with_icon"><p class="tree_item leaf"><a title="Guest" href="http://rubylearning.org/classes/course/switchrole.php?id=10&sesskey=jCmhDlJCQH&switchrole=6&returnurl=http%3A%2F%2Frubylearning.org%2Fclasses%2Fmod%2Fpage%2Fview.php%3Fid%3D633%26sesskey%3DjCmhDlJCQH"><img alt="" class="smallicon navicon" title="" src="./PFTWWR-2  Day 13 - JSON, MongoDB, mongo, MongoHQ_files/switchrole">Guest</a></p></li></ul></li>
<li class="type_unknown collapsed contains_branch" aria-expanded="false"><hr><p class="tree_item branch root_node" id="usersettings"><span tabindex="0">My profile settings</span></p><ul><li class="type_setting collapsed item_with_icon"><p class="tree_item leaf"><a title="Edit profile" href="http://rubylearning.org/classes/user/edit.php?id=22&course=10"><img alt="" class="smallicon navicon" title="" src="./PFTWWR-2  Day 13 - JSON, MongoDB, mongo, MongoHQ_files/navigationitem">Edit profile</a></p></li>
<li class="type_setting collapsed item_with_icon"><p class="tree_item leaf"><a title="Change password" href="http://rubylearning.org/classes/login/change_password.php?id=10"><img alt="" class="smallicon navicon" title="" src="./PFTWWR-2  Day 13 - JSON, MongoDB, mongo, MongoHQ_files/navigationitem">Change password</a></p></li>
<li class="type_setting collapsed item_with_icon"><p class="tree_item leaf"><a title="Messaging" href="http://rubylearning.org/classes/message/edit.php?id=22"><img alt="" class="smallicon navicon" title="" src="./PFTWWR-2  Day 13 - JSON, MongoDB, mongo, MongoHQ_files/navigationitem">Messaging</a></p></li></ul></li></ul></div></div></div><span id="sb-2" class="skip-block-to"></span>                    </div>
                </div>
                
                
            </div>
        </div>
    </div>
</div>

    
<!-- START OF FOOTER -->
        <div id="page-footer" class="wrapper">
        <p class="helplink"><a href="http://docs.moodle.org/24/en/mod/page/view"><img class="iconhelp icon-pre" alt="Moodle Docs for this page" title="Moodle Docs for this page" src="./PFTWWR-2  Day 13 - JSON, MongoDB, mongo, MongoHQ_files/docs">Moodle Docs for this page</a></p>
        <div class="logininfo">You are logged in as <a href="http://rubylearning.org/classes/user/profile.php?id=22">Douglas Allen</a> (<a href="http://rubylearning.org/classes/login/logout.php?sesskey=jCmhDlJCQH">Logout</a>)</div><div class="homelink"><a href="http://rubylearning.org/classes/course/view.php?id=10">PFTWWR-2</a></div>
<p> <strong>© 2008-2013 RubyLearning.org : A Ruby Learning Hub</strong></p>    </div>
    </div>
<script type="text/javascript" src="./PFTWWR-2  Day 13 - JSON, MongoDB, mongo, MongoHQ_files/footer"></script>
<script type="text/javascript">
//<![CDATA[
M.str = {"moodle":{"lastmodified":"Last modified","name":"Name","error":"Error","info":"Information","viewallcourses":"View all courses","cancel":"Cancel","yes":"Yes"},"repository":{"type":"Type","size":"Size","invalidjson":"Invalid JSON string","nofilesattached":"No files attached","filepicker":"File picker","logout":"Logout","nofilesavailable":"No files available","norepositoriesavailable":"Sorry, none of your current repositories can return files in the required format.","fileexistsdialogheader":"File exists","fileexistsdialog_editor":"A file with that name has already been attached to the text you are editing.","fileexistsdialog_filemanager":"A file with that name has already been attached","renameto":"Rename to \"{$a}\"","referencesexist":"There are {$a} alias\/shortcut files that use this file as their source"},"block":{"addtodock":"Move this to the dock","undockitem":"Undock this item","undockall":"Undock all","hidedockpanel":"Hide the dock panel","hidepanel":"Hide panel"},"langconfig":{"thisdirectionvertical":"btt"},"admin":{"confirmation":"Confirmation"}};
//]]>
</script>
<script type="text/javascript">
//<![CDATA[
var navtreeexpansions4 = [{"id":"expandable_branch_1","key":"94","type":30},{"id":"expandable_branch_2","key":"95","type":30},{"id":"expandable_branch_3","key":"mycourses","type":0}];
//]]>
</script>
<script type="text/javascript">
//<![CDATA[
YUI().use('node', function(Y) {
M.util.load_flowplayer();
setTimeout("fix_column_widths()", 20);
M.yui.galleryversion="2010.04.08-12-35";Y.use("core_dock","moodle-block_navigation-navigation",function() {M.block_navigation.init_add_tree({"id":"4","instance":"4","candock":false,"courselimit":"20","expansionlimit":0});
});
M.yui.galleryversion="2010.04.08-12-35";Y.use("core_dock","moodle-block_navigation-navigation",function() {M.block_navigation.init_add_tree({"id":"5","instance":"5","candock":false});
});
M.util.help_popups.setup(Y);
Y.on('click', openpopup, "#action_link50f7b1777eaee1", null, {"url":"http:\/\/rubylearning.org\/classes\/report\/loglive\/index.php?id=1&inpopup=1","name":"popup","options":"height=400,width=500,top=0,left=0,menubar=0,location=0,scrollbars,resizable,toolbar,status,directories=0,fullscreen=0,dependent"});
Y.on('click', openpopup, "#action_link50f7b1777eaee2", null, {"url":"http:\/\/rubylearning.org\/classes\/report\/loglive\/index.php?id=10&inpopup=1","name":"popup","options":"height=400,width=500,top=0,left=0,menubar=0,location=0,scrollbars,resizable,toolbar,status,directories=0,fullscreen=0,dependent"});

});
//]]>
</script>

<div id="dock" role="menubar" class="dock dock_left_vertical nothingdocked"><div class="buttons_container" id="yui_3_7_3_2_1358410102833_33"><div class="dockeditem_container"></div><div class="controls"><img alt="Undock all" title="Undock all" tabindex="0" src="./PFTWWR-2  Day 13 - JSON, MongoDB, mongo, MongoHQ_files/dock_to_block"></div></div></div><div style="display: none;"></div></body></html>